services:
  serena:
    command: uv
    args:
      - run
      - --directory
      - /home/alex4o/Projects/serena
      - serena
      - start-mcp-server
      - --context
      - claude-code
      - --project
      - /home/alex4o/Projects/mcp-serviced
      - --transport
      - sse
      - --port
      - "8767"
    transport: sse
    url: http://localhost:8767/sse
    readiness:
      check: http
      url: http://localhost:8767/sse
      timeout: 60s
      interval: 500ms
    restart: on-failure
    keep_alive: true

  cgc:
    command: uvx
    args:
      - --from
      - codegraphcontext
      - cgc
      - mcp
      - start
    transport: stdio
    restart: on-failure
    env:
      DEFAULT_DATABASE: falkordb
      FALKORDB_PATH: /home/alex4o/Projects/mcp-serviced/.cgc/falkordb.db
      FALKORDB_SOCKET_PATH: /home/alex4o/Projects/mcp-serviced/.cgc/falkordb.sock
      INDEX_VARIABLES: "true"
      ALLOW_DB_DELETION: "false"
      DEBUG_LOGS: "false"
      DEBUG_LOG_PATH: /home/alex4o/Projects/mcp-serviced/.cgc/debug.log
      ENABLE_APP_LOGS: CRITICAL
      LOG_FILE_PATH: /home/alex4o/Projects/mcp-serviced/.cgc/cgc.log
      MAX_FILE_SIZE_MB: "10"
      IGNORE_TEST_FILES: "false"
      IGNORE_HIDDEN_FILES: "true"
      ENABLE_AUTO_WATCH: "true"
      COMPLEXITY_THRESHOLD: "10"
      MAX_DEPTH: unlimited
      PARALLEL_WORKERS: "4"
      CACHE_ENABLED: "true"
      IGNORE_DIRS: node_modules,venv,.venv,env,.env,dist,build,target,out,.git,.idea,.vscode,__pycache__
      INDEX_SOURCE: "true"
    exclude_tools:
      - find_code
    middleware:
      response: [extract-json-results, strip-json-keys]
